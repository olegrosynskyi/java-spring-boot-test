version: '2'
services:
  app:
    container_name: app
    image: 'app'
    ports:
      - "8080:8080"
    environment:
      - USE_RDS=true
      - RDS_USERNAME=root
      - RDS_PASSWORD=root
      - RDS_HOSTNAME=app_db
      - RDS_PORT=3306
      - RDS_DB_NAME=app
      - APP_NAME=newapp
      - REDIS_HOST=redis_db
      - ENVIRONMENT_TYPE=development
      - RABBITMQ_ADDRESS=rabbitmq
      - RABBITMQ_USERNAME=root
      - RABBITMQ_USER_PASSWORD=root
      - RABBITMQ_PORT=5672
    env_file:
      - ./.env
    depends_on:
      - "mysql"
  mysql:
    container_name: app_db
    ports:
      - "33060:3306"
    image: "mysql:5.7.31"
    volumes:
      - ./docker/app.cnf:/etc/mysql/conf.d/app.cnf
    environment:
      - MYSQL_ROOT_PASSWORD=root
